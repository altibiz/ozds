@inherits OwningComponentBase

<Loading Load="@(async () => (Model ?? await ScopedServices.GetRequiredService<OzdsRepresentativeQueries>().MaybeRepresentingUserByUserId(Id))!)">
  <Found>
    <MudText Typo="Typo.h5">User</MudText>
    <MudPaper>
      <MudGrid>
        <MudItem xs="12" sm="6">
          <MudText Typo="Typo.body1">Id</MudText>
          <MudText Typo="Typo.body2">@context.User.UserName</MudText>
        </MudItem>
        <MudItem xs="12" sm="6">
          <MudText Typo="Typo.body1">Email</MudText>
          <MudText Typo="Typo.body2">@context.User.Email</MudText>
        </MudItem>
      </MudGrid>
    </MudPaper>
    @if (context.Representative is { } representative)
    {
      <MudText Typo="Typo.h6">@representative.Title</MudText>
      <MudPaper>
        <MudGrid>
          <MudItem xs="12" sm="6">
            <MudText Typo="Typo.body1">Role</MudText>
            <MudText Typo="Typo.body2">@representative.Role</MudText>
          </MudItem>
          <MudItem xs="12" sm="6">
            <MudText Typo="Typo.body1">Name</MudText>
            <MudText Typo="Typo.body2">@representative.PhysicalPerson.Name</MudText>
          </MudItem>
        </MudGrid>
      </MudPaper>
    }
  </Found>
</Loading>

@code {
  [Parameter] public string Id { get; set; } = default!;

  [Parameter] public MaybeRepresentingUserModel? Model { get; set; }
}
