@using Microsoft.AspNetCore.Components.Web
@using Microsoft.Extensions.DependencyInjection
@using MudBlazor
@using Ozds.Business.Models.Abstractions
@using Ozds.Business.Models.Base
@using Ozds.Business.Models.Enums
@using Ozds.Business.Queries
@using Ozds.Business.Queries.Abstractions
@using Ozds.Client.Attributes
@using Ozds.Client.Components.Base
@using Ozds.Client.Components.Streaming
@using Ozds.Client.Components.Tables
@using Ozds.Client.Components.Models
@using Ozds.Client.State

@namespace Ozds.Client.Pages

@page "/system/notifications"

@attribute [Navigation(
  Order = -1000,
  Title = "Notifications",
  Icon = Icons.Material.Filled.VerifiedUser,
  Parent = typeof(SystemPage),
  Allows = [
    RoleModel.OperatorRepresentative,
    RoleModel.LocationRepresentative,
    RoleModel.NetworkUserRepresentative
  ])]

@inherits OzdsOwningComponentBase

<HeadContent>
  <title>OZDS - @Translate("Notifications")</title>
</HeadContent>

<MudCheckBox
  T="bool"
  Label="@(Translate("Seen"))"
  @bind-Checked="_seen" />

<Paging PageAsync="OnPageAsync">
  <Found Context="page">
    <ResponsiveTable
      Model="@(page.Items)"
      Link="@(x => PageHref<NotificationPage>(new { x.Id }))">
      <Summary>
        <NotificationSummary Model="@context" />
      </Summary>
      <Details>
        <NotificationDetails Model="@context" />
      </Details>
      <Columns>
        <NotificationColumns />
      </Columns>
    </ResponsiveTable>
  </Found>
</Paging>
