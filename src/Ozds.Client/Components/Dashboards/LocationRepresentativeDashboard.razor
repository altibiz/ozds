@using MudBlazor
@using Ozds.Business.Models.Abstractions
@using Ozds.Business.Time
@using Ozds.Business.Analysis
@using Ozds.Client.Components.Base
@using Ozds.Client.State

@namespace Ozds.Client.Components.Dashboards

@inherits OzdsComponentBase

<MudHidden Breakpoint="Breakpoint.MdAndUp">
  <MudGrid Class="my-3 pa-1">
    <MudItem xs="12" Class="pa-1">
      <MudPaper Class="d-flex align-center justify-stat mud-width-full pa-1 pb-3 flex-column">
        <MudItem Class="d-flex justify-center align-center" Style="font-size: large; font-weight: bold;">
          <MudText Typo="Typo.h6">
            @Translate("Last months consumption"):
          </MudText>
        </MudItem>
        <MudContainer Class="d-flex justify-center" MaxWidth="MaxWidth.Small">
          <MudText Typo="Typo.h4">
            @(NumericString(Model.LastMonthConsumption.ActiveEnergy_kWh, 0)) kWh
          </MudText>
        </MudContainer>
      </MudPaper>
    </MudItem>

    <MudItem xs="12" Class="pa-1">
      <MudPaper Class="d-flex align-center justify-stat mud-width-full pa-1 pb-3 flex-column">
        <MudItem Class="d-flex justify-center align-center" Style="font-size: large; font-weight: bold;">
          <MudText Typo="Typo.h6">
            @Translate("Current months consumption"):
          </MudText>
        </MudItem>
        <MudContainer Class="d-flex justify-center" MaxWidth="MaxWidth.Small">
          <MudText Typo="Typo.h4">
            @(NumericString(Model.ThisMonthConsumption.ActiveEnergy_kWh, 0)) kWh
          </MudText>
        </MudContainer>
      </MudPaper>
    </MudItem>

    <MudItem xs="12" Class="pa-1">
      <MudPaper Class="d-flex align-center justify-stat mud-width-full pa-1 pb-3 flex-column">
        <MudItem Class="d-flex justify-center align-center" Style="font-size: large; font-weight: bold;">
          <MudText Typo="Typo.h6">
            @Translate("Active power"):
          </MudText>
        </MudItem>
        <MudContainer Class="d-flex justify-center" MaxWidth="MaxWidth.Small">
          <MudText Typo="Typo.h4">
            @NumericString(Model.Load.ActivePower_kW) kW
          </MudText>
        </MudContainer>
      </MudPaper>
    </MudItem>
  </MudGrid>
</MudHidden>

<MudHidden Breakpoint="Breakpoint.SmAndDown">
  <MudGrid Class="my-3">
    <MudItem xs="4">
      <MudPaper Class="mud-width-full d-flex flex-column justify-space-between pa-4" Height="320px">
        <MudItem Class="" Style="font-size: large; font-weight: bold;">
          <MudText Typo="Typo.h5">
            @(Translate("Last months consumption") + ": ")
          </MudText>
        </MudItem>
        <MudContainer Class="d-flex align-end justify-center pb-10" MaxWidth="MaxWidth.Small">
          <MudText Typo="Typo.h1">
            @(NumericString(Model.LastMonthConsumption.ActiveEnergy_kWh, 0))
          </MudText>
          <MudText Typo="Typo.h4" Class="mb-3 ml-1">kWh</MudText>
        </MudContainer>
      </MudPaper>
    </MudItem>

    <MudItem xs="4">
      <MudPaper Class="mud-width-full d-flex flex-column justify-space-between pa-4" Height="320px">
        <MudItem Class="" Style="font-size: large; font-weight: bold;">
          <MudText Typo="Typo.h5">
            @(Translate("Current months consumption") + ": ")
          </MudText>
        </MudItem>
        <MudContainer Class="d-flex align-end justify-center pb-10" MaxWidth="MaxWidth.Small">
          <MudText Typo="Typo.h1">
            @(NumericString(Model.ThisMonthConsumption.ActiveEnergy_kWh, 0))
          </MudText>
          <MudText Typo="Typo.h4" Class="mb-3 ml-1">kWh</MudText>
        </MudContainer>
      </MudPaper>
    </MudItem>

    <MudItem xs="4">
      <MudPaper Class="mud-width-full d-flex flex-column justify-space-between pa-4" Height="320px">
        <MudItem Class="" Style="font-size: large; font-weight: bold;">
          <MudText Typo="Typo.h5">
            @(Translate("Active power") + ": ")
          </MudText>
        </MudItem>
        <MudContainer Class="d-flex align-end justify-center pb-10" MaxWidth="MaxWidth.Small">
          <MudText Typo="Typo.h1">
            @(NumericString(Model.Load.ActivePower_kW))
          </MudText>
          <MudText Typo="Typo.h4" Class="mb-3 ml-1">kW</MudText>
        </MudContainer>
      </MudPaper>
    </MudItem>
  </MudGrid>
</MudHidden>

@code {
  [Parameter]
  public Analysis Model { get; set; } = default!;

  [Parameter]
  public List<IMeter> Meters { get; set; } = default!;
}
