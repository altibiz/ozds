@using Microsoft.AspNetCore.Components
@using MudBlazor
@using System.Linq.Expressions

@namespace Ozds.Client.Components.Fields

@* TODO: null handling *@

@typeparam T

<MudSelect
  Label="@Title"
  @bind-Value="@Value"
  For="For">
  @foreach (var value in Enum.GetValues(typeof(T)))
  {
    <MudSelectItem Value="@((T)value)">
      @if (Label is { } label)
      {
        @label((T)value)
      }
      else
      {
        @value.ToString()
      }
    </MudSelectItem>
  }
</MudSelect>

@code {
  [Parameter]
  public T Value { get; set; } = default!;

  [Parameter]
  public EventCallback<T> ValueChanged { get; set; } = default!;

  [Parameter]
  public string Title { get; set; } = default!;

  [Parameter]
  public Func<T, string>? Label { get; set; } = default!;

  [Parameter]
  public Expression<Func<T>> For { get; set; } = default!;
}
