@namespace Ozds.Client.Components.Layout
@using System.Globalization
@using Ozds.Client.Base
@using Ozds.Client.State
@using MudBlazor
@inherits OzdsComponentBase

<MudDrawer
  Open="@LayoutState.IsLocalizationDrawerOpen"
  OpenChanged="open => LayoutState.SetLocalizationDrawerOpen(open)"
  Elevation="0"
  Anchor="Anchor.Bottom"
  Variant="DrawerVariant.Temporary"
  ClipMode="DrawerClipMode.Never">
  <MudDrawerHeader>
    <MudText Typo="Typo.h6" Style="text-align: center;">
      @T["Localization"]
    </MudText>
  </MudDrawerHeader>
  <MudDivider />
  <MudDrawerContainer>
    <MudList T="string">
      <MudListItem
        Text="@(new CultureInfo("hr-HR").NativeName)"
        Icon="@Icons.Material.Filled.Language"
        OnClick="@(e => {
          Culture = new CultureInfo("hr-HR");
          LayoutState.SetLocalizationDrawerOpen(false);
        })" />
      <MudListItem
        Text="@(new CultureInfo("en-US").NativeName)"
        Icon="@Icons.Material.Filled.Language"
        OnClick="@(e => {
          Culture = new CultureInfo("en-US");
          LayoutState.SetLocalizationDrawerOpen(false);
        })" />
    </MudList>
  </MudDrawerContainer>
</MudDrawer>

@code {
  [CascadingParameter]
  public LayoutState LayoutState { get; set; } = default!;
}
