@namespace Ozds.Client.Components.Layout
@using System.Globalization
@using Ozds.Client.Base
@using Ozds.Client.State
@using MudBlazor
@inherits OzdsComponentBase

<MudDrawer
  Open="@LayoutState.IsLocalizationDrawerOpen"
  OpenChanged="open => LayoutState.SetLocalizationDrawerOpen(open)"
  Elevation="0"
  Anchor="@LayoutState.DrawerAnchor"
  Variant="DrawerVariant.Temporary"
  ClipMode="DrawerClipMode.Never">
  <MudDrawerHeader>
    <MudText Typo="Typo.h6" Style="text-align: center;">
      @T["Localization"]
    </MudText>
  </MudDrawerHeader>
  <MudDivider />
  <MudDrawerContainer>
    <MudNavMenu>
      <MudNavLink
        Icon="@Icons.Material.Filled.Language"
        OnClick="@(e => {
          Culture = new CultureInfo("hr-HR");
          LayoutState.SetLocalizationDrawerOpen(false);
        })" >@(new CultureInfo("hr-HR").NativeName)</MudNavLink>
      <MudNavLink
        Icon="@Icons.Material.Filled.Language"
        OnClick="@(e => {
          Culture = new CultureInfo("en-US");
          LayoutState.SetLocalizationDrawerOpen(false);
        })" >@(new CultureInfo("en-US").NativeName)</MudNavLink>
    </MudNavMenu>
  </MudDrawerContainer>
</MudDrawer>

@code {
  [CascadingParameter]
  public LayoutState LayoutState { get; set; } = default!;
}
