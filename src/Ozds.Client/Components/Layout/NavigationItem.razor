@using Microsoft.AspNetCore.Components.Routing
@using MudBlazor
@using Ozds.Client.State
@using Ozds.Client.Attributes
@using Ozds.Client.Components.Base

@namespace Ozds.Client.Components.Layout

@inherits OzdsComponentBase

@if (Descriptor.Children.Any())
{
  <MudNavGroup
    Expanded="@LayoutState.IsNavigationDrawerOpen"
    Title="@Translate(Descriptor.Navigation.Title)"
    Style="justify-self: center; max-width: 600px; font-size:larger;">
    @foreach (var child in Descriptor.Children)
    {
      <NavigationItem Descriptor="child" />
    }
  </MudNavGroup>
}

<MudNavLink Href="@Descriptor.Route.Template" Match="NavLinkMatch.All">
  <MudContainer MaxWidth="MaxWidth.Small" Class="d-flex flex-row">
    <MudHidden Breakpoint="Breakpoint.Xs">
      <div style="margin-left: -8px;" class="d-flex flex-row align-center">
        <MudIcon Icon="@Descriptor.Navigation.Icon" />
      </div>
    </MudHidden>
    <MudHidden Breakpoint="Breakpoint.SmAndUp">
      <div style="margin-left: -28px;" class="d-flex flex-row align-center">
        <MudIcon Icon="@Descriptor.Navigation.Icon" />
      </div>
    </MudHidden>
    <MudText Class="ml-4">
      @Translate(Descriptor.Navigation.Title)
    </MudText>
  </MudContainer>
</MudNavLink>

@code {
  [Parameter]
  public NavigationAttribute.NavigationDescriptor
    Descriptor { get; set; } = default!;

  [CascadingParameter]
  private LayoutState LayoutState { get; set; } = default!;
}
