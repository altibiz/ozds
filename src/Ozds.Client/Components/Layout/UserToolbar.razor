@using MudBlazor
@using Ozds.Client.Components.Base
@using Ozds.Client.State

@namespace Ozds.Client.Components.Layout

@inherits OzdsComponentBase

<MudToolBar
  DisableGutters
  Style="background-color: var(--mud-palette-appbar-background);"
  Class="mud-elevation-4">
  <MudContainer
    MaxWidth="@MaxWidth.Large"
    Class="@($"d-flex flex-row {Class}")"
    Style="@($"height: 100%; {Style}")">
    <MudHidden Breakpoint="Breakpoint.SmAndDown">
      <MudButton
        OnClick="NavigateToIndex"
        Style="margin-left: -8px;"
        Class="d-flex align-center">
        <MudImage
          Src="/logo.svg"
          Alt="Helb"
          Style="height: 40px;" />
      </MudButton>
    </MudHidden>
    <MudHidden Breakpoint="Breakpoint.MdAndUp">
      <MudButton
        OnClick="NavigateToIndex"
        Style="margin-left: -12px;"
        Class="d-flex align-center">
        <MudImage
          Src="/favicon.png"
          Alt="Helb"
          Style="height: 40px;" />
      </MudButton>
    </MudHidden>
    <MudSpacer />
    <div Class="d-flex flex-row justify-end">
      <MudButton
        Variant="Variant.Text"
        OnClick="ToggleDarkMode"
        Class="d-flex flex-row align-center">
        @if (IsDarkMode)
        {
          <MudIcon Icon="@Icons.Material.Filled.DarkMode" />
        }
        else
        {
          <MudIcon Icon="@Icons.Material.Filled.LightMode" />
        }
        <MudHidden Breakpoint="Breakpoint.SmAndDown">
          <div Class="ml-2">
            <MudText>
              (@DarkModeName)
            </MudText>
          </div>
        </MudHidden>
      </MudButton>
      <MudButton
        Variant="Variant.Text"
        OnClick="ToggleLocalizationDrawer"
        Class="d-flex flex-row align-center">
        <MudIcon Icon="@Icons.Material.Filled.Language" />
        <MudHidden Breakpoint="Breakpoint.SmAndDown">
          <div Class="ml-2">
            <MudText>@CultureName</MudText>
          </div>
        </MudHidden>
      </MudButton>
      <MudHidden Breakpoint="Breakpoint.MdAndUp">
        <MudButton
          OnClick="ToggleUserDrawer"
          Variant="Variant.Text"
          Class="d-flex flex-row align-center"
          Style="margin-right: -18px;">
          <MudIcon Icon="@Icons.Material.Filled.Person"/>
        </MudButton>
      </MudHidden>
      <MudHidden Breakpoint="Breakpoint.SmAndDown">
        <MudButton
          OnClick="ToggleUserDrawer"
          Variant="Variant.Text"
          Class="d-flex flex-row align-center">
          <MudIcon Icon="@Icons.Material.Filled.Person"/>
          <div Class="ml-2 d-flex flex-column align-center">
            <MudText>
              @Translate("Welcome"),
            </MudText>
            <MudText>
              @UserName
            </MudText>
          </div>
        </MudButton>
      </MudHidden>
      @if (LocationState is { })
      {
        <MudButton
          OnClick="ExitLocation"
          Variant="Variant.Text"
          Style="margin-right: -10px;">
          <MudIcon Icon="@(Icons.Material.Filled.ExitToApp)" />
        </MudButton>
      }
    </div>
  </MudContainer>
</MudToolBar>

@code {
  [Parameter]
  public MaxWidth MaxWidth { get; set; } = default;

  [Parameter]
  public string Style { get; set; } = string.Empty;

  [Parameter]
  public string Class { get; set; } = string.Empty;
}
