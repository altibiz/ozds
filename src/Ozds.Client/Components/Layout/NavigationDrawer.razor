@using Microsoft.AspNetCore.Components.Routing
@using MudBlazor
@using Ozds.Client.Components.Base
@using Ozds.Client.State
@using Ozds.Client.Attributes

@namespace Ozds.Client.Components.Layout

@inherits OzdsComponentBase

@implements IDisposable

<MudDrawer
  Open="@LayoutState.IsNavigationDrawerOpen"
  OpenChanged="SetNavigationDrawerOpen"
  Elevation="4"
  Anchor="@LayoutState.DrawerAnchor"
  Variant="DrawerVariant.Temporary"
  ClipMode="DrawerClipMode.Never"
  Style="height: 100vh;">
  <MudDrawerHeader Style="padding-inline: 0;">
    <MudContainer
      MaxWidth="@MaxWidth"
      Class="@($"d-flex flex-column {Class}")"
      Style="@($"width: 100%; {Style}")">
      <MudImage
        Src="/favicon.ico"
        Alt="Helb"
        Style="height: calc(var(--mud-appbar-height) - 24px);"/>
      <MudSpacer />
      <MudButton
        OnClick="ToggleNavigationDrawer"
        Variant="Variant.Text"
        Color="MudBlazor.Color.Primary"
        Style="margin-right: -24px;"
        Class="d-flex flex-row align-center">
        <MudIcon Icon="@Icons.Material.Filled.Close"/>
      </MudButton>
    </MudContainer>
  </MudDrawerHeader>
    <MudDrawerContainer>
      <MudNavMenu>
        @foreach (var descriptor in Descriptors)
        {
          <NavigationItem
            Descriptor="descriptor"
          />
          <MudContainer
            MaxWidth="@MaxWidth"
            Class="@Class"
            Style="@Style">
            <MudDivider />
          </MudContainer>
        }
      </MudNavMenu>
    </MudDrawerContainer>
</MudDrawer>

@code {
  [Parameter]
  public MaxWidth MaxWidth { get; set; } = default;

  [Parameter]
  public string Style { get; set; } = string.Empty;

  [Parameter]
  public string Class { get; set; } = string.Empty;
}
