@using Microsoft.AspNetCore.Components
@using MudBlazor
@using Ozds.Business.Models
@using Ozds.Business.Models.Base
@using Ozds.Client.Components.Base
@using Ozds.Client.Components.Fields
@using Ozds.Client.Components.Streaming

@namespace Ozds.Client.Components.Models

@inherits OzdsComponentBase

<MudTextField
  Label="Id"
  @bind-Value="Model.Id"
  For="@(() => Model.Id)"/>

<MudTextField
  Label="@Translate("Name")"
  @bind-Value="Model.Title"
  For="@(() => Model.Title)"/>

<MudTextField
  Label="@Translate("Connected power")"
  @bind-Value="Model.ConnectionPower_W"
  For="@(() => Model.ConnectionPower_W)"/>

<MudSelect
  Label="@Translate("Messenger")"
  AnchorOrigin="Origin.BottomCenter"
  @bind-Value="Model.MessengerId"
  For="@(() => Model.MessengerId)">
  <Paging T="MessengerModel">
    <Summary>
      <MudSelectItem Value="context.Id">
        <MessengerSummary Model="context"/>
      </MudSelectItem>
    </Summary>
  </Paging>
</MudSelect>

<MudSelect
  Label="@Translate("Validator")"
  AnchorOrigin="Origin.BottomCenter"
  @bind-Value="Model.MeasurementValidatorId"
  For="@(() => Model.MeasurementValidatorId)">
  <Paging T="AbbB2xMeasurementValidatorModel">
    <Summary>
      <MudSelectItem Value="context.Id">
        <AbbB2xMeasurementValidatorSummary Model="context"/>
      </MudSelectItem>
    </Summary>
  </Paging>
</MudSelect>

<MultiEnumPicker
  @bind-Value="Model.Phases"
  Title="@Translate("Phases")"
  Label="x => Translate(x.ToTitle())"/>

@code {
  [Parameter]
  public AbbB2xMeterModel Model { get; set; } = default!;
}
