@using Microsoft.AspNetCore.Components
@using MudBlazor
@using Ozds.Business.Models.Composite
@using Ozds.Business.Models.Enums
@using Ozds.Client.Components.Base
@using Ozds.Client.Components.Fields

@namespace Ozds.Client.Components.Models

@inherits OzdsComponentBase

<MudTextField
  Label="@Translate("User Name")"
  @bind-Value="Model.User.UserName"
  For="@(() => Model.User.UserName)"/>

@if (Model.Representative is { })
{
  <MudTextField
    Label="@Translate("Title")"
    @bind-Value="Model.Representative.Title"
    For="@(() => Model.Representative.Title)"/>

  <EnumPicker
    @bind-Value="Model.Representative.Role"
    Title="@Translate("Role")"
    Label="x => Translate(x.ToTitle())"/>

  <MultiEnumPicker
    T="TopicModel"
    Value="@Model.Representative.Topics.ToHashSet()"
    ValueChanged="@((x) => Model.Representative.Topics = x.ToList())"
    Title="@Translate("Topics")"
    Label="x => Translate(x.ToTitle())"/>

  <MudTextField
    Label="@Translate("Name")"
    @bind-Value="Model.Representative.PhysicalPerson.Name"
    For="@(() => Model.Representative.PhysicalPerson.Name)"/>

  <MudTextField
    Label="@Translate("Email")"
    @bind-Value="Model.Representative.PhysicalPerson.Email"
    For="@(() => Model.Representative.PhysicalPerson.Email)"/>

  <MudTextField
    Label="@Translate("PhoneNumber")"
    @bind-Value="Model.Representative.PhysicalPerson.PhoneNumber"
    For="@(() => Model.Representative.PhysicalPerson.PhoneNumber)"/>
}
else
{
  <MudButton OnClick="@OnCreateRepresentative">
    @Translate("Create representative")
  </MudButton>
}
