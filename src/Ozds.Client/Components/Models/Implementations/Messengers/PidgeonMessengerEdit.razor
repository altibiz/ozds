@using Microsoft.AspNetCore.Components
@using MudBlazor
@using Ozds.Business.Models
@using Ozds.Business.Models.Enums
@using Ozds.Business.Models.Complex
@using Ozds.Client.Components.Fields
@using Ozds.Client.Components.Base
@using Ozds.Client.Components.Streaming

@namespace Ozds.Client.Components.Models

@inherits OzdsComponentBase

<MudTextField
  Label="@Translate("Title")"
  @bind-Value="Model.Title"
  For="@(() => Model.Title)"
  Required="true" />

<MudSelect
  Label="@Translate("Location")"
  AnchorOrigin="Origin.BottomCenter"
  @bind-Value="Model.LocationId"
  For="@(() => Model.LocationId)"
  Required="true">
  <Paging T="PidgeonMessengerModel">
    <Summary Context="model">
      <MudSelectItem Value="model.Id">
        @model.Title
      </MudSelectItem>
    </Summary>
  </Paging>
</MudSelect>

<MudText Typo="Typo.h6" Class="mt-4">
  @Translate("Max Inactivity Period")
</MudText>

<MudGrid>
  <MudItem xs="6">
      <MudNumericField
        T="uint"
        Label="@Translate("Multiplier")"
        @bind-Value="Model.MaxInactivityPeriod.Multiplier"
        For="@(() => Model.MaxInactivityPeriod.Multiplier)"
        Min="1"
        Required="true" />
    </MudItem>
    <MudItem xs="6">
      <EnumPicker
        @bind-Value="Model.MaxInactivityPeriod.Duration"
        Title="@Translate("Duration")"
        Label="x => Translate(x.ToTitle())" />
    </MudItem>
</MudGrid>

<MudText Typo="Typo.h6" Class="mt-4">
  @Translate("Push Delay Period")
</MudText>

<MudGrid>
  <MudItem xs="6">
      <MudNumericField
        T="uint"
        Label="@Translate("Multiplier")"
        @bind-Value="Model.PushDelayPeriod.Multiplier"
        For="@(() => Model.PushDelayPeriod.Multiplier)"
        Min="1"
        Required="true" />
  </MudItem>
  <MudItem xs="6">
    <EnumPicker
      @bind-Value="Model.PushDelayPeriod.Duration"
      Title="@Translate("Duration")"
      Label="x => Translate(x.ToTitle())" />
  </MudItem>
</MudGrid>

@code {
  [Parameter]
  public PidgeonMessengerModel Model { get; set; } = default!;
}
